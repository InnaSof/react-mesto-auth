{"ast":null,"code":"class Auth {\n  constructor(baseUrl) {\n    this._url = baseUrl;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  registration(password, email) {\n    return fetch(`${this._url}/signup`, {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        \"password\": password,\n        \"email\": email\n      })\n    }).then(res => this._checkResponse(res));\n  }\n\n  authorization(password, email) {\n    return fetch(`${this._url}/signin`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"password\": password,\n        \"email\": email\n      })\n    }).then(res => this._checkResponse(res));\n  }\n\n  checkToken(token) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(res => this._checkResponse(res));\n  }\n\n}\n\nconst auth = new Auth('https://auth.nomoreparties.co');\nexport default auth;","map":{"version":3,"sources":["/Users/vitalijsofronuk/dev/react-mesto-auth/src/utils/auth.js"],"names":["Auth","constructor","baseUrl","_url","_checkResponse","res","ok","json","Promise","reject","status","registration","password","email","fetch","method","headers","body","JSON","stringify","then","authorization","checkToken","token","auth"],"mappings":"AAAA,MAAMA,IAAN,CAAW;AACTC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACnB,SAAKC,IAAL,GAAYD,OAAZ;AACD;;AAEDE,EAAAA,cAAc,CAACC,GAAD,EAAM;AAClB,QAAIA,GAAG,CAACC,EAAR,EAAY;AACV,aAAOD,GAAG,CAACE,IAAJ,EAAP;AACD;;AACD,WAAOC,OAAO,CAACC,MAAR,CAAgB,WAAUJ,GAAG,CAACK,MAAO,EAArC,CAAP;AACD;;AAEDC,EAAAA,YAAY,CAACC,QAAD,EAAWC,KAAX,EAAkB;AAC5B,WAAOC,KAAK,CAAE,GAAE,KAAKX,IAAK,SAAd,EAAwB;AAChCY,MAAAA,MAAM,EAAE,MADwB;AAEhCC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFuB;AAKhCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB,oBAAYP,QADO;AAEnB,iBAASC;AAFU,OAAf;AAL0B,KAAxB,CAAL,CAUJO,IAVI,CAUCf,GAAG,IAAI,KAAKD,cAAL,CAAoBC,GAApB,CAVR,CAAP;AAWD;;AAEDgB,EAAAA,aAAa,CAACT,QAAD,EAAWC,KAAX,EAAkB;AAC7B,WAAOC,KAAK,CAAE,GAAE,KAAKX,IAAK,SAAd,EAAwB;AAChCY,MAAAA,MAAM,EAAE,MADwB;AAEhCC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFuB;AAKhCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB,oBAAYP,QADO;AAEnB,iBAASC;AAFU,OAAf;AAL0B,KAAxB,CAAL,CAUJO,IAVI,CAUCf,GAAG,IAAI,KAAKD,cAAL,CAAoBC,GAApB,CAVR,CAAP;AAWD;;AAEDiB,EAAAA,UAAU,CAACC,KAAD,EAAQ;AAChB,WAAOT,KAAK,CAAE,GAAE,KAAKX,IAAK,WAAd,EAA0B;AAClCY,MAAAA,MAAM,EAAE,KAD0B;AAElCC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAkB,UAASO,KAAM;AAF1B;AAFyB,KAA1B,CAAL,CAOJH,IAPI,CAOCf,GAAG,IAAI,KAAKD,cAAL,CAAoBC,GAApB,CAPR,CAAP;AAQD;;AAjDQ;;AAoDX,MAAMmB,IAAI,GAAG,IAAIxB,IAAJ,CAAS,+BAAT,CAAb;AAEA,eAAewB,IAAf","sourcesContent":["class Auth {\n  constructor(baseUrl) {\n    this._url = baseUrl;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  registration(password, email) {\n    return fetch(`${this._url}/signup`, {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          \"password\": password,\n          \"email\": email\n        })\n      })\n      .then(res => this._checkResponse(res))\n  }\n\n  authorization(password, email) {\n    return fetch(`${this._url}/signin`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"password\": password,\n          \"email\": email\n        })\n      })\n      .then(res => this._checkResponse(res))\n  }\n  \n  checkToken(token) {\n    return fetch(`${this._url}/users/me`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      })\n      .then(res => this._checkResponse(res))\n  }\n}\n\nconst auth = new Auth('https://auth.nomoreparties.co');\n\nexport default auth;\n"]},"metadata":{},"sourceType":"module"}